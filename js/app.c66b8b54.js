(function(t){function a(a){for(var s,n,o=a[0],l=a[1],c=a[2],u=0,p=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(a);while(p.length)p.shift()();return r.push.apply(r,c||[]),e()}function e(){for(var t,a=0;a<r.length;a++){for(var e=r[a],s=!0,o=1;o<e.length;o++){var l=e[o];0!==i[l]&&(s=!1)}s&&(r.splice(a--,1),t=n(n.s=e[0]))}return t}var s={},i={app:0},r=[];function n(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=s,n.d=function(t,a,e){n.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,a){if(1&a&&(t=n(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)n.d(e,s,function(a){return t[a]}.bind(null,s));return e},n.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(a,"a",a),a},n.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},n.p="/e-commerce/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=a,o=o.slice();for(var c=0;c<o.length;c++)a(o[c]);var d=l;r.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},3148:function(t,a,e){},"33e0":function(t,a,e){t.exports=e.p+"img/main_slider_item_2_lg.f570b5c6.png"},"475d":function(t,a,e){t.exports=e.p+"img/main_slider_item_1_lg.f6b9d97e.png"},"4a2f":function(t,a,e){"use strict";e("b1d9")},"4db0":function(t,a,e){"use strict";e("b851")},"56d7":function(t,a,e){"use strict";e.r(a);e("4de4"),e("e260"),e("e6cf"),e("cca6"),e("a79d");var s=e("2b0e"),i=e("bc3a"),r=e.n(i),n=e("2106"),o=e.n(n),l=e("9062"),c=e.n(l),d=(e("e40d"),e("4989"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("router-view")],1)}),u=[],p={name:"App"},m=p,v=(e("5c0b"),e("2877")),g=Object(v["a"])(m,d,u,!1,null,null,null),f=g.exports,h=e("8c4f"),b=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Navbar"),e("Alert"),e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("Sidebar"),e("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 px-md-4",attrs:{role:"main"}},[e("router-view")],1)],1)])],1)},_=[],C=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{staticClass:"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse",attrs:{id:"sidebarMenu"}},[e("div",{staticClass:"sidebar-sticky pt-3"},[t._m(0),e("ul",{staticClass:"nav flex-column mb-2"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{"active-class":"active",to:"/admin/products"}},[e("i",{staticClass:"fas fa-box-open"}),t._v(" 產品列表 ")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{"active-class":"active",to:"/admin/orders"}},[e("i",{staticClass:"fas fa-list-alt"}),t._v(" 訂單列表 ")])],1)]),t._m(1),e("ul",{staticClass:"nav flex-column mb-2"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/customer_order"}},[t._v(" 模擬訂單 ")])],1)])])])},x=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[e("span",[t._v("管理員")]),e("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#","aria-label":"Add a new report"}},[e("span",{attrs:{"data-feather":"plus-circle"}})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[e("span",[t._v("模擬功能")]),e("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#","aria-label":"Add a new report"}},[e("span",{attrs:{"data-feather":"plus-circle"}})])])}],P={},y=P,w=Object(v["a"])(y,C,x,!1,null,null,null),k=w.exports,$=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{staticClass:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow"},[e("a",{staticClass:"navbar-brand col-md-3 col-lg-2 mr-0 px-3",attrs:{href:"#"}},[t._v("Company name")]),t._m(0),e("input",{staticClass:"form-control form-control-dark w-100",attrs:{type:"text",placeholder:"Search","aria-label":"Search"}}),e("ul",{staticClass:"navbar-nav px-3"},[e("li",{staticClass:"nav-item text-nowrap"},[e("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.signout(a)}}},[t._v("Sign out")])])])])},j=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"navbar-toggler position-absolute d-md-none collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}],L={name:"Navbar",methods:{signout:function(){var t="".concat("https://vue-course-api.hexschool.io","/logout"),a=this;this.$http.post(t).then((function(t){t.data.success&&a.$router.push("/login")}))}}},M=L,E=Object(v["a"])(M,$,j,!1,null,null,null),O=E.exports,N=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"message-alert"},t._l(t.messages,(function(a,s){return e("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+a.status},[t._v(" "+t._s(a.message)+" "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){return t.removeMessage(s)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])})),0)},D=[],T=(e("4160"),e("a434"),e("159b"),{name:"Navbar",data:function(){return{messages:[]}},created:function(){var t=this;t.$bus.$on("message:push",(function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(a,e)}))},methods:{updateMessage:function(t,a){var e=Math.floor(new Date/1e3);this.messages.push({message:t,status:a,timestamp:e}),this.removeMessageWithTiming(e)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var a=this;setTimeout((function(){a.messages.forEach((function(e,s){e.timestamp===t&&a.messages.splice(s,1)}))}),5e3)}}}),A=T,I=(e("4a2f"),Object(v["a"])(A,N,D,!1,null,null,null)),S=I.exports,U={name:"Dashboard",components:{Sidebar:k,Navbar:O,Alert:S}},q=U,F=Object(v["a"])(q,b,_,!1,null,null,null),J=F.exports,W=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("Alert"),e("form",{staticClass:"card  box mx-auto",on:{submit:function(a){return a.preventDefault(),t.signin(a)}}},[e("h1",[t._v("Login")]),e("p",{staticClass:"text-muted"},[t._v(" Please enter your login and password! ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],attrs:{type:"text",name:"username",placeholder:"Username"},domProps:{value:t.user.username},on:{input:function(a){a.target.composing||t.$set(t.user,"username",a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t.user.password},on:{input:function(a){a.target.composing||t.$set(t.user,"password",a.target.value)}}}),e("a",{staticClass:"forgot text-muted",attrs:{href:"#"}},[t._v("Forgot password? ")]),e("input",{attrs:{type:"submit",name:"",value:"Login",href:"#"}})])],1)},z=[],B={name:"Login",components:{Alert:S},data:function(){return{user:{username:"",password:""}}},methods:{signin:function(){var t="".concat("https://vue-course-api.hexschool.io","/admin/signin"),a=this;this.$http.post(t,a.user).then((function(t){t.data.success?a.$router.push("/admin/products"):a.$bus.$emit("message:push",t.data.message,"danger")}))}}},H=B,Q=(e("b3ff"),Object(v["a"])(H,W,z,!1,null,"064f162a",null)),G=Q.exports,K=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"text-right mt-4"},[e("button",{staticClass:"btn btn-primary",on:{click:function(a){return t.openModal(!0)}}},[t._v(" 建立新產品 ")])]),e("table",{staticClass:"table mt-4"},[t._m(0),e("tbody",t._l(t.products,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.category))]),e("td",[t._v(t._s(a.title))]),e("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(a.origin_price))+" ")]),e("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(a.price))+" ")]),e("td",[a.is_enabled?e("span",{staticClass:"text-success"},[t._v("啟用")]):e("span",[t._v("未啟用")])]),e("td",[e("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.openModal(!1,a)}}},[t._v(" 編輯 ")]),e("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(e){return t.openDeleteModal(a)}}},[t._v(" 刪除 ")])])])})),0)]),e("Pagination",{attrs:{pagination:t.pagination},on:{emitPage:t.getProducts}}),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"form-control",attrs:{id:"image",type:"text",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"imageUrl",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"customFile"}},[t._v("或 上傳圖片 "),t.status.fileUploading?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),e("input",{ref:"files",staticClass:"form-control",attrs:{id:"customFile",type:"file"},on:{change:t.uploadFile}})]),e("img",{staticClass:"img-fluid",attrs:{img:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=828346ed697837ce808cae68d3ddc3cf&auto=format&fit=crop&w=1350&q=80",src:t.tempProduct.imageUrl,alt:""}})]),e("div",{staticClass:"col-sm-8"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("標題")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",attrs:{id:"title",type:"text",placeholder:"請輸入標題"},domProps:{value:t.tempProduct.title},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"title",a.target.value)}}})]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"category"}},[t._v("分類")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",attrs:{id:"category",type:"text",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"category",a.target.value)}}})]),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"price"}},[t._v("單位")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",attrs:{id:"unit",type:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"unit",a.target.value)}}})])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"origin_price"}},[t._v("原價")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",attrs:{id:"origin_price",type:"number",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"origin_price",a.target.value)}}})]),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"price"}},[t._v("售價")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",attrs:{id:"price",type:"number",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"price",a.target.value)}}})])]),e("hr"),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"description"}},[t._v("產品描述")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"form-control",attrs:{id:"description",type:"text",placeholder:"請輸入產品描述"},domProps:{value:t.tempProduct.description},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"description",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"content"}},[t._v("說明內容")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{id:"content",type:"text",placeholder:"請輸入產品說明內容"},domProps:{value:t.tempProduct.content},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"content",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],staticClass:"form-check-input",attrs:{id:"is_enabled","true-value":1,"false-value":0,type:"checkbox"},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t._q(t.tempProduct.is_enabled,1)},on:{change:function(a){var e=t.tempProduct.is_enabled,s=a.target,i=s.checked?1:0;if(Array.isArray(e)){var r=null,n=t._i(e,r);s.checked?n<0&&t.$set(t.tempProduct,"is_enabled",e.concat([r])):n>-1&&t.$set(t.tempProduct,"is_enabled",e.slice(0,n).concat(e.slice(n+1)))}else t.$set(t.tempProduct,"is_enabled",i)}}}),e("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v(" 是否啟用 ")])])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v(" 確認 ")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),e("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProduct.title))]),t._v(" 商品(刪除後將無法恢復)。 ")]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteProduct}},[t._v(" 確認刪除 ")])])])])])],1)},R=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("th",{attrs:{width:"120"}},[t._v(" 分類 ")]),e("th",[t._v("產品名稱")]),e("th",{staticClass:"text-right",attrs:{width:"120"}},[t._v(" 原價 ")]),e("th",{staticClass:"text-right",attrs:{width:"120"}},[t._v(" 售價 ")]),e("th",{attrs:{width:"100"}},[t._v(" 是否啟用 ")]),e("th",{attrs:{width:"150"}},[t._v(" 編輯 ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("新增產品")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-danger text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("刪除產品")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],V=(e("99af"),e("1157")),X=e.n(V),Y=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.updatePage(t.pagination.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),e("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._l(t.pagination.total_pages,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:t.pagination.current_page===a}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.updatePage(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.updatePage(t.pagination.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),e("span",{staticClass:"sr-only"},[t._v("Next")])])])],2)])},Z=[],tt={props:["pagination"],methods:{updatePage:function(t){this.$emit("emitPage",t)}}},at=tt,et=Object(v["a"])(at,Y,Z,!1,null,null,null),st=et.exports,it={name:"Products",components:{Pagination:st},data:function(){return{products:[],tempProduct:{},isNew:!1,isLoading:!1,status:{fileUploading:!1},pagination:{}}},created:function(){this.getProducts()},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("johnson0903","/products?page=").concat(t);a.isLoading=!0,this.$http.get(e).then((function(t){a.products=t.data.products,a.isLoading=!1,a.pagination=t.data.pagination}))},openModal:function(t,a){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct=Object.assign({},a),this.isNew=!1),X()("#productModal").modal("show")},openDeleteModal:function(t){this.tempProduct=Object.assign({},t),X()("#delProductModal").modal("show")},updateProduct:function(){var t=this;console.log(this);var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("johnson0903","/admin/product"),e="post",s=this;s.isNew||(a="".concat("https://vue-course-api.hexschool.io","/api/").concat("johnson0903","/admin/product/").concat(this.tempProduct.id),e="put"),this.$http[e](a,{data:s.tempProduct}).then((function(a){a.data.success?(X()("#productModal").modal("hide"),t.$bus.$emit("message:push",a.data.message,"success"),s.getProducts()):t.$bus.$emit("message:push",a.data.message,"danger")}))},deleteProduct:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("johnson0903","/admin/product/").concat(this.tempProduct.id),e=this;this.$http.delete(a).then((function(a){a.data.success?(X()("#delProductModal").modal("hide"),e.getProducts(),t.$bus.$emit("message:push",a.data.message,"success")):t.$bus.$emit("message:push",a.data.message,"danger")}))},uploadFile:function(){var t=this,a=this.$refs.files.files[0],e=this,s=new FormData;s.append("file-to-upload",a);var i="".concat("https://vue-course-api.hexschool.io","/api/").concat("johnson0903","/admin/upload");e.status.fileUploading=!0,this.$http.post(i,s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){e.status.fileUploading=!1,a.data.success?e.$set(e.tempProduct,"imageUrl",a.data.imageUrl):t.$bus.$emit("message:push",a.data.message,"danger")}))}}},rt=it,nt=Object(v["a"])(rt,K,R,!1,null,null,null),ot=nt.exports,lt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("table",{staticClass:"table mt-4"},[t._m(0),t.orders.length?e("tbody",t._l(t.sortOrder,(function(a,s){return e("tr",{key:s,class:{"text-secondary":!a.is_paid}},[e("td",[t._v(t._s(t._f("date")(a.create_at)))]),e("td",[a.user?e("span",{domProps:{textContent:t._s(a.user.email)}}):t._e()]),e("td",[e("ul",{staticClass:"list-unstyled"},t._l(a.products,(function(a,s){return e("li",{key:s},[t._v(" "+t._s(a.product.title)+" 數量："+t._s(a.qty)+" "+t._s(a.product.unit)+" ")])})),0)]),e("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(a.total))+" ")]),e("td",[a.is_paid?e("strong",{staticClass:"text-success"},[t._v("已付款")]):e("span",{staticClass:"text-muted"},[t._v("尚未起用")])])])})),0):t._e()]),e("Pagination",{attrs:{pagination:t.pagination},on:{emitPages:t.getOrders}})],1)},ct=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("購買時間")]),e("th",[t._v("Email")]),e("th",[t._v("購買款項")]),e("th",{staticClass:"text-right"},[t._v(" 應付金額 ")]),e("th",[t._v("是否付款")])])])}],dt={components:{Pagination:st},data:function(){return{orders:{},isNew:!1,pagination:{},isLoading:!1}},computed:{sortOrder:function(){var t=this,a=[];return t.orders.length&&(a=t.orders.sort((function(t,a){var e=t.is_paid?1:0,s=a.is_paid?1:0;return s-e}))),a}},created:function(){this.getOrders()},methods:{getOrders:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("johnson0903","/admin/orders?page=").concat(t);a.isLoading=!0,this.$http.get(e,a.tempProduct).then((function(t){a.orders=t.data.orders,a.pagination=t.data.pagination,a.isLoading=!1,console.log(t)}))}}},ut=dt,pt=Object(v["a"])(ut,lt,ct,!1,null,null,null),mt=pt.exports,vt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav",{staticClass:"navbar navbar-expand-md navbar-dark fixed-top bg-dark"},[e("div",{staticClass:"container"},[e("router-link",{staticClass:"navbar-brand",attrs:{to:"/index"}},[e("img",{attrs:{src:"https://cdn.cybassets.com/s/files/8891/theme/27159/assets/img/navbar_logo.png?1567651523",alt:"",height:"30"}})]),t._m(0),e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarCollapse"}},[t._m(1),e("ul",{staticClass:"navbar-nav"},[e("li",{staticClass:"nav-item dropdown"},[e("button",{staticClass:"btn btn-light dropdown-toggle",attrs:{id:"cartDropdownLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"fas fa-lg fa-shopping-bag"}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.cart.carts.length,expression:"cart.carts.length"}],staticClass:"badge badge-pill badge-danger"},[t._v(t._s(t.cart.carts.length))])]),e("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"cartDropdownLink"}},[e("table",{staticClass:"table"},[t._m(2),e("tbody",t._l(t.cart.carts,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.removeCartItem(a.id)}}},[e("i",{staticClass:"far fa-trash-alt"})])]),e("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.product.title)+" ")]),e("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.qty)+"/"+t._s(a.product.unit)+" ")]),e("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(a.final_total)+" ")])])})),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v(" 總計 ")]),e("td",{staticClass:"text-right"},[t._v(" "+t._s(t.cart.total)+" ")]),e("td",{staticClass:"text-right"},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.cart.carts.length,expression:"cart.carts.length"}],staticClass:"btn btn-success",on:{click:t.createOrder}},[t._v(" 結帳 ")])])])])])])])])])],1)]),e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"container main-content"},[e("div",{staticClass:"row mt-4"},[t._m(3),e("div",{staticClass:"col-md-12 my-3"},[e("ul",{staticClass:"nav nav-tabs mb-3",attrs:{id:"pills-tab",role:"tablist"}},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link active",attrs:{id:"pills-home-tab",href:"#","data-toggle":"pill",role:"tab","aria-selected":"true"},on:{click:function(a){a.preventDefault(),t.filterType="all"}}},[t._v("All")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{id:"pills-profile-tab",href:"#","data-toggle":"pill",role:"tab","aria-selected":"false"},on:{click:function(a){a.preventDefault(),t.filterType="上衣"}}},[t._v("上衣")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{id:"pills-contact-tab",href:"#","data-toggle":"pill",role:"tab","aria-selected":"false"},on:{click:function(a){a.preventDefault(),t.filterType="滑板"}}},[t._v("滑板")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{id:"pills-contact-tab",href:"#","data-toggle":"pill",role:"tab","aria-selected":"false"},on:{click:function(a){a.preventDefault(),t.filterType="滑板鞋"}}},[t._v("滑板鞋")])])])]),t._l(t.filteredProducts,(function(a){return e("div",{key:a.id,staticClass:"col-md-4 mb-4"},[e("div",{staticClass:"card border-0 shadow-sm"},[e("div",{staticStyle:{height:"150px","background-repeat":"no-repeat","background-size":"contain","background-position":"center"},style:{backgroundImage:"url("+a.imageUrl+")"}}),e("div",{staticClass:"card-body"},[e("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(a.category))]),e("h5",{staticClass:"card-title"},[e("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(a.title))])]),e("p",{staticClass:"card-text overflow-hidden"},[t._v(" "+t._s(a.content)+" ")]),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[a.price?t._e():e("div",{staticClass:"h5"},[t._v(" "+t._s(a.origin_price)+" 元 ")]),a.price?e("del",{staticClass:"h6"},[t._v(" "+t._s(a.origin_price)+" ")]):t._e(),a.price?e("div",{staticClass:"h5"},[t._v(" 現在只要 "+t._s(a.price)+" 元 ")]):t._e()])]),e("div",{staticClass:"card-footer d-flex"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.getProduct(a.id)}}},[t.status.loadingItem===a.id?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 查看更多 ")]),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){return t.addToCart(a.id)}}},[t.status.loadingItem===a.id?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 加到購物車 ")])])])])}))],2)]),t._m(4),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(" "+t._s(t.selectedProduct.title)+" ")]),t._m(5)]),e("div",{staticClass:"modal-body"},[e("img",{staticClass:"img-fluid",attrs:{src:t.selectedProduct.imageUrl,alt:""}}),e("blockquote",{staticClass:"blockquote mt-3"},[e("p",{staticClass:"mb-0"},[t._v(" "+t._s(t.selectedProduct.content)+" ")]),e("footer",{staticClass:"blockquote-footer text-right"},[t._v(" "+t._s(t.selectedProduct.description)+" ")])]),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.selectedProduct.price?t._e():e("div",{staticClass:"h4"},[t._v(" "+t._s(t.selectedProduct.origin_price)+" 元 ")]),t.selectedProduct.price?e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t.selectedProduct.origin_price)+" 元")]):t._e(),t.selectedProduct.price?e("div",{staticClass:"h4"},[t._v(" 現在只要 "+t._s(t.selectedProduct.price)+" 元 ")]):t._e()]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedProduct.num,expression:"selectedProduct.num"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.selectedProduct,"num",a.target.multiple?e:e[0])}}},t._l(10,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(" 選購 "+t._s(a)+" "+t._s(t.selectedProduct.unit)+" ")])})),0)]),e("div",{staticClass:"modal-footer"},[e("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v(" 小計 "),e("strong",[t._v(t._s(t.selectedProduct.price?t.selectedProduct.num*t.selectedProduct.price:t.selectedProduct.num*t.selectedProduct.origin_price))]),t._v(" 元 ")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.addToCart(t.selectedProduct.id,t.selectedProduct.num)}}},[t.selectedProduct.id===t.status.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 加到購物車 ")])])])])])],1)},gt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ul",{staticClass:"navbar-nav mr-auto"},[e("li",{staticClass:"nav-item active"},[e("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("新品上市 "),e("span",{staticClass:"sr-only"},[t._v("(current)")])])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("服飾")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("鞋款")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"#"}},[t._v("板身")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("th"),e("th",[t._v("品名")]),e("th",{attrs:{width:"80"}},[t._v(" 數量 ")]),e("th",{staticClass:"text-right"},[t._v(" 單價 ")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"carousel slide",attrs:{id:"carouselExampleIndicators","data-ride":"carousel"}},[s("ol",{staticClass:"carousel-indicators"},[s("li",{staticClass:"active",attrs:{"data-target":"#carouselExampleIndicators","data-slide-to":"0"}}),s("li",{attrs:{"data-target":"#carouselExampleIndicators","data-slide-to":"1"}}),s("li",{attrs:{"data-target":"#carouselExampleIndicators","data-slide-to":"2"}})]),s("div",{staticClass:"carousel-inner"},[s("div",{staticClass:"carousel-item active"},[s("img",{staticClass:"d-block w-100",attrs:{src:e("475d"),alt:"First slide"}})]),s("div",{staticClass:"carousel-item"},[s("img",{staticClass:"d-block w-100",attrs:{src:e("33e0"),alt:"Second slide"}})]),s("div",{staticClass:"carousel-item"},[s("img",{staticClass:"d-block w-100",attrs:{src:e("e087"),alt:"Third slide"}})])]),s("a",{staticClass:"carousel-control-prev",attrs:{href:"#carouselExampleIndicators",role:"button","data-slide":"prev"}},[s("span",{staticClass:"carousel-control-prev-icon",attrs:{"aria-hidden":"true"}}),s("span",{staticClass:"sr-only"},[t._v("Previous")])]),s("a",{staticClass:"carousel-control-next",attrs:{href:"#carouselExampleIndicators",role:"button","data-slide":"next"}},[s("span",{staticClass:"carousel-control-next-icon",attrs:{"aria-hidden":"true"}}),s("span",{staticClass:"sr-only"},[t._v("Next")])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("footer",{staticClass:"bg-dark text-light py-3"},[e("div",{staticClass:"container"},[e("ul",{staticClass:"list-inline text-center"},[e("li",{staticClass:"list-inline-item"},[t._v(" © Copright 2020 Johnson's Jimi Skate shop ")]),e("li",{staticClass:"list-inline-item"},[e("a",{staticClass:"text-info",attrs:{href:"#"}},[e("i",{staticClass:"fa fa-instagram",attrs:{"aria-hidden":"true"}}),t._v(" Instagrame")])]),e("li",{staticClass:"list-inline-item"},[e("a",{staticClass:"text-info",attrs:{href:"#"}},[e("i",{staticClass:"fa fa-facebook-square",attrs:{"aria-hidden":"true"}}),t._v(" Facebook")])]),e("li",{staticClass:"list-inline-item"},[e("a",{staticClass:"text-info",attrs:{href:"#"}},[t._v("About")])])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],ft={data:function(){return{products:[],filterType:"all",selectedProduct:{},cart:{},status:{loadingItem:""},isLoading:!1,form:{user:{name:"johnson0903",email:"johnson50701@gmail.com",tel:"0912345678",address:"新北市新店區幸福路1號"},message:""}}},computed:{filteredProducts:function(){var t=this;if("all"===t.filterType)return t.products;var a=[];return t.products.forEach((function(e){e.category===t.filterType&&a.push(e)})),a}},created:function(){this.getProducts(),this.getCart()},methods:{getProducts:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("johnson0903","/products/all");t.isLoading=!0,this.$http.get(a).then((function(a){t.products=a.data.products,t.isLoading=!1}))},getProduct:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("johnson0903","/product/").concat(t);a.status.loadingItem=t,this.$http.get(e).then((function(t){a.selectedProduct=t.data.product,a.selectedProduct.num=1,X()("#productModal").modal("show"),a.status.loadingItem=""}))},addToCart:function(t){var a=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("johnson0903","/cart");s.status.loadingItem=t;var r={product_id:t,qty:e};this.$http.post(i,{data:r}).then((function(t){s.status.loadingItem="",X()("#productModal").modal("hide"),a.getCart()}))},getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("johnson0903","/cart");t.isLoading=!0,this.$http.get(a).then((function(a){t.cart=a.data.data,console.log(t.cart),t.isLoading=!1}))},removeCartItem:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("johnson0903","/cart/").concat(t);a.isLoading=!0,this.$http.delete(e).then((function(t){a.getCart(),a.isLoading=!1}))},createOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("johnson0903","/order"),e=t.form;t.isLoading=!0,this.$http.post(a,{data:e}).then((function(a){console.log("訂單已建立",a),t.isLoading=!1}))}}},ht=ft,bt=(e("4db0"),Object(v["a"])(ht,vt,gt,!1,null,null,null)),_t=bt.exports;s["a"].use(h["a"]);var Ct=[{path:"*",redirect:"/"},{path:"/",name:"CustomerOrder",component:_t},{path:"/login",name:"Login",component:G},{path:"/admin",name:"Dashboard",component:J,meta:{requiresAuth:!0},children:[{path:"products",name:"Products",component:ot,meta:{requiresAuth:!0}},{path:"orders",name:"Orders",component:mt,meta:{requiresAuth:!0}}]}],xt=new h["a"]({base:"/e-commerce/",routes:Ct}),Pt=xt;s["a"].prototype.$bus=new s["a"];e("a9e3");var yt=function(t){return"$".concat(Number(t).toLocaleString())},wt=function(t){var a=new Date(1e3*t);return a.toLocaleDateString()};s["a"].use(o.a,r.a),s["a"].config.productionTip=!1,s["a"].component("Loading",c.a),s["a"].filter("currency",yt),s["a"].filter("date",wt),r.a.defaults.withCredentials=!0,Pt.beforeEach((function(t,a,e){if(t.meta.requiresAuth){var s="".concat("https://vue-course-api.hexschool.io","/api/user/check");r.a.post(s).then((function(t){console.log(t),t.data.success?e():e({path:"/login"})}))}else e()})),new s["a"]({router:Pt,render:function(t){return t(f)}}).$mount("#app")},"5c0b":function(t,a,e){"use strict";e("9c0c")},"9c0c":function(t,a,e){},b1d9:function(t,a,e){},b3ff:function(t,a,e){"use strict";e("3148")},b851:function(t,a,e){},e087:function(t,a,e){t.exports=e.p+"img/main_slider_item_3_lg.62184884.png"}});
//# sourceMappingURL=app.c66b8b54.js.map